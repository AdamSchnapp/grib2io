<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pygrib</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th bgcolor="#70b0f0" class="navbar-select"
          >&nbsp;&nbsp;&nbsp;Home&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Module&nbsp;pygrib
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module pygrib</h1><p class="nomargin-top"></p>
<h1 class="heading">Introduction</h1>
    <p>Python module for reading and writing GRIB (editions 1 and 2) files.
    GRIB is the World Meterological Organization <a 
    href="http://www.wmo.ch/pages/prog/www/WMOCodes/GRIB.html" 
    target="_top">standard</a> for distributing gridded data. The module is
    a python interface to the <a 
    href="http://www.ecmwf.int/products/data/software/grib_api.html" 
    target="_top">GRIB API</a> C library from the European Centre for 
    Medium-Range Weather Forecasts (<a href="http://www.ecmwf.int" 
    target="_top">ECMWF</a>).</p>
  <h1 class="heading">Required</h1>
    <ul>
      <li>
        <a href="http://python.org" target="_top">Python</a> 2.4 or higher.
      </li>
      <li>
        <a 
        href="http://sourceforge.net/project/showfiles.php?group_id=1369" 
        target="_top">numpy</a> N-dimensional array object for python. 
        Version 1.2.1 or higher.
      </li>
      <li>
        <a href="http://code.google.com/p/pyproj/" target="_top">pyproj</a>
        Python interface to <a href="http://trac.osgeo.org/proj" 
        target="_top">PROJ.4</a> library for cartographic transformations.
      </li>
      <li>
        <a href="http://www.ecmwf.int/products/data/software/grib_api.html"
        target="_top">GRIB API</a> C library for encoding and decoding GRIB
        messages (edition 1 and edition 2). Version 1.8.0 or higher 
        required. To be fully functional, the GRIB API library requires <a 
        href="http://www.ece.uvic.ca/~mdadams/jasper" 
        target="_top">Jasper</a> or <a href="http://www.openjpeg.org" 
        target="_top">OpenJPEG</a> for JPEG200 encoding, and <a 
        href="http://www.libpng.org/pub/png/libpng.html" 
        target="_top">PNG</a> for PNG encoding.
      </li>
    </ul>
  <h1 class="heading">Installation</h1>
    <ul>
      <li>
        <a href="http://code.google.com/p/pygrib/downloads/list" 
        target="_top">Download</a> the source code.
      </li>
      <li>
        set the environment variables <code>$GRIBAPI_DIR</code>, 
        <code>$JASPER_DIR</code>, <code>$OPENJPEG_DIR</code>, 
        <code>$PNG_DIR</code> and <code>$ZLIB_DIR</code> so that the 
        include files and libraries for GRIB API, Jasper, OpenJPEG, PNG and
        zlib will be found. For example, the include files for jasper 
        should be found in <code>$JASPER_DIR/include</code> or 
        <code>$JASPER_DIR/include/jasper</code>, and the jasper library 
        should be found in <code>$JASPER_DIR/lib</code> or 
        <code>$JASPER_DIR/lib64</code>. If any of those environment  
        variables are not set, then the default search paths will be used. 
        If the GRIB API library was compiled without JASPER, PNG or 
        OpenJPEG support, then the corresponding environment variable need 
        not be set.
      </li>
      <li>
        Run 'python setup.py install', as root if necessary.
      </li>
      <li>
        Run 'python test.py' to test your installation.
      </li>
    </ul>
  <h1 class="heading">Example usage</h1>
    <ul>
      <li>
        from the python interpreter prompt, import the package:
<pre class="literalblock">
  &gt;&gt;&gt; import pygrib
</pre>
      </li>
      <li>
        open a GRIB file, create a grib message iterator:
<pre class="literalblock">
  &gt;&gt;&gt; grbs = pygrib.open('sampledata/flux.grb')  
</pre>
      </li>
      <li>
        print an inventory of the file:
<pre class="literalblock">
  &gt;&gt;&gt; for grb in grbs:
  &gt;&gt;&gt;     print grb 
  1:Precipitation rate:kg m**-2 s**-1 (avg):regular_gg:surface:level 0:fcst time 108-120:from 200402291200
  2:Surface pressure:Pa (instant):regular_gg:surface:level 0:fcst time 120:from 200402291200
  3:Maximum temperature:K (instant):regular_gg:heightAboveGround:level 2:fcst time 108-120:from 200402291200
  4:Minimum temperature:K (instant):regular_gg:heightAboveGround:level 2:fcst time 108-120:from 200402291200
</pre>
      </li>
      <li>
        find the first grib message with a matching name:
<pre class="literalblock">
  &gt;&gt;&gt; for grb in grbs:
  &gt;&gt;&gt;     if grb['name'] == 'Maximum temperature': break
</pre>
      </li>
      <li>
        extract the data values using the 'values' key (grb.keys() will 
        return a list of the available keys):
<pre class="literalblock">
# The data is returned as a numpy array, or if missing values or a bitmap
# are present, a numpy masked array.  Reduced lat/lon or gaussian grid
# data is automatically expanded to a regular grid.
&gt;&gt;&gt; maxt = grb['values']
&gt;&gt;&gt; print maxt.shape, maxt.min(), maxt.max()
(94, 192) 223.7 319.9
</pre>
      </li>
      <li>
        instead of treating the gribmessage instance as a dictionary to 
        access key/value pairs, you can access the keys as attributes:
<pre class="literalblock">
&gt;&gt;&gt; maxt = grb.values
&gt;&gt;&gt; print maxt.shape, maxt.min(), maxt.max()
(94, 192) 223.7 319.9
</pre>
      </li>
      <li>
        get the latitudes and longitudes of the grid:
<pre class="literalblock">
  &gt;&gt;&gt; lats, lons = grb.latlons()
  &gt;&gt;&gt; print lats.shape, lats.min(), lats.max(), lons.shape, lons.min(), lons.max()
  (94, 192) -88.5419501373 88.5419501373  0.0 358.125
</pre>
      </li>
      <li>
        use <a href="pygrib.open-class.html#select" 
        class="link">open.select</a> to choose grib messages based upon 
        specified key/value pairs:
<pre class="literalblock">
  &gt;&gt;&gt; selected_grbs = grbs.select(level=2,typeOfLevel='heightAboveGround') # get all 2-m level fields
  &gt;&gt;&gt; for grb in selected_grbs: print grb
  3:Maximum temperature:K (instant):regular_gg:heightAboveGround:level 2:fcst time 108-120:from 200402291200
  4:Minimum temperature:K (instant):regular_gg:heightAboveGround:level 2:fcst time 108-120:from 200402291200
</pre>
      </li>
      <li>
        get the third grib message:
<pre class="literalblock">
  &gt;&gt;&gt; grb = grbs.message(3)
  &gt;&gt;&gt; print grb
  3:Maximum temperature:K (instant):regular_gg:heightAboveGround:level 2:fcst time 108-120:from 200402291200
</pre>
      </li>
      <li>
        indexing with integer key is the same as calling the message 
        method:
<pre class="literalblock">
  &gt;&gt;&gt; grb = grbs[2]
  &gt;&gt;&gt; print grb
  2:Surface pressure:Pa (instant):regular_gg:surface:level 0:fcst time 120:from 200402291200
</pre>
      </li>
      <li>
        modify the values associated with existing keys (either via 
        attribute or dictionary access):
<pre class="literalblock">
&gt;&gt;&gt; grb['forecast_time'] = 240
&gt;&gt;&gt; grb.dataDate = 20100101
</pre>
      </li>
      <li>
        get the binary string associated with the coded message:
<pre class="literalblock">
  &gt;&gt;&gt; msg = grb.tostring()
</pre>
      </li>
      <li>
        write the modified message to a new GRIB file:
<pre class="literalblock">
  &gt;&gt;&gt; grbout = open('test.grb','wb')
  &gt;&gt;&gt; grbout.write(msg)
  &gt;&gt;&gt; grbout.close()
  &gt;&gt;&gt; grbs = pygrib.open('test.grb')
  &gt;&gt;&gt; grbs.next()
  &gt;&gt;&gt; print grb
  1:Surface pressure:Pa (instant):regular_gg:surface:level 0:fcst time 240:from 201001011200
</pre>
      </li>
    </ul>
  <h1 class="heading">Documentation</h1>
    <ul>
      <li>
        see below for the full python API documentation.
      </li>
    </ul>
  <h1 class="heading">Changelog</h1>
    <ul>
      <li>
        see <a href="http://pygrib.googlecode.com/svn/trunk/Changelog" 
        target="_top">Changelog</a> file.
      </li>
    </ul>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Jeffrey Whitaker.
      </p>
      <p><strong>Contact:</strong>
        <a href="mailto:jeffrey.s.whitaker@noaa.gov" target="_top">Jeff 
        Whitaker</a>
      </p>
      <p><strong>Version:</strong>
        1.6
      </p>
      <p><strong>Copyright:</strong>
        copyright 2010 by Jeffrey Whitaker.
      </p>
      <p><strong>License:</strong>
        Permission to use, copy, modify, and distribute this software and 
        its documentation for any purpose and without fee is hereby 
        granted, provided that the above copyright notice appear in all 
        copies and that both that copyright notice and this permission 
        notice appear in supporting documentation. THE AUTHOR DISCLAIMS ALL
        WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED 
        WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE 
        AUTHOR BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES
        OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR 
        PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER 
        TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR 
        PERFORMANCE OF THIS SOFTWARE.
      </p>
</div><!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Classes</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pygrib.gribmessage-class.html" class="summary-name">gribmessage</a><br />
      Grib message object.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pygrib.index-class.html" class="summary-name">index</a><br />
      index(filename, *args)
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pygrib.open-class.html" class="summary-name">open</a><br />
      open(filename)
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pygrib-module.html#api_version" class="summary-sig-name">api_version</a>()</span><br />
      return an integer representing the GRIB_API library version.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__version__"></a><span class="summary-name">__version__</span> = <code title="'1.6'"><code class="variable-quote">'</code><code class="variable-string">1.6</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="api_version"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">api_version</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>return an integer representing the GRIB_API library version. 
  GRIB_API_VERSION=GRIB_API_MAJOR_VERSION*10000+GRIB_API_MINOR_VERSION*100+GRIB_API_REVISION_VERSION</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th bgcolor="#70b0f0" class="navbar-select"
          >&nbsp;&nbsp;&nbsp;Home&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri May  7 09:21:01 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
